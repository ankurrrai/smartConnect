{let e=function(){let e=$("#create-post");e.submit((function(o){o.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:function(o){console.log(o);let l=t(o.data.newPost);$("#all-post>ul").prepend(l),n($(" .delete-post-button ",l)),s(o.data.newPost._id),e[0].reset(),new ToggleLike($(" .toogle-like-button",l)),r("Post Published!","success")},error:function(e){console.log(e.responseText),r(e.responseText,"error")}})}))},t=function(e){return $(`<li id="post-${e._id}">\n\n        <div class="home-allPost">\n            \n            <div class="home-allPost-content">\n               <div>\n                   <small> ${e.user.name} <br></small>\n                   <span>\n                       ${e.content}\n                   </span>\n                   <div class="likes-button">\n                    <a href="/likes/toggle/?id=${e._id}&type=Post" class="toogle-like-button" data-likes="0">0 <i class="fa fa-thumbs-up"></i></a>\n                   </div>\n                </div>\n               \n    \n               <div class="post-comments">\n                       <form action="/comment/create" id="post-comment-form-${e._id}" class="post-comment-form" method="post">\n                           <input type="text" name="content" placeholder="Add Comment..." required>\n                           <input type="hidden" name="post" value="${e._id}" readonly>\n                           <input type="submit" value="Add Comment">\n                       </form>\n                   </div>\n               \n               <div class="post-comments-list">\n                   <ul id="post-comments-${e._id}">\n                       \n                   </ul>\n                   \n                   \n               </div>\n    \n            </div>\n\n            <div class="delete-button">\n                   <a class="delete-post-button" href="/posts/destroy/?id=${e._id}">Del</a>\n               </div>\n        \n    \n            \n    \n       </div>\n    \n    </li>`)},n=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),r("Post and associated comment deleted!","success")},error:function(e){console.log(e.responseText),r(e.responseText,"error")}})}))},o=function(){let e=$(".delete-post-button");for(let t of e)n(t)},s=function(e){let t=$("#post-comment-form-"+e);$(t).submit((function(n){n.preventDefault(),$.ajax({type:"post",url:"/comment/create",data:t.serialize(),success:function(n){let o=l(n.data.new_comment);$("#post-comments-"+e).append(o),i($(" .delete-comment-button",o)),new ToggleLike($(" .toogle-like-button",o)),t[0].reset(),r("Comment Added","success")},error:function(e){console.log(e.responseText),r(e.responseText,"error")}})}))},l=function(e){return $(`<li id="comment-${e._id}">\n                        \n            <div class="comment-content">\n                ${e.content}\n                <br>\n                <small>\n                    ${e.user.email}\n                </small>\n                <div class="likes-button">\n                    <a href="/likes/toggle/?id=${e._id}&type=Comment" class="toogle-like-button" data-likes="0">0 <i class="fa fa-thumbs-up"></i></a>\n                </div>\n            </div>\n\n            <div class="comment-delete-button">\n                <a class="delete-comment-button" href="/comment/destroy/?id=${e._id}">Del Comment</a>\n            </div>\n       \n    </li>`)},i=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#comment-"+e.data.comment_id).remove(),r("Comment Deleted","success")},error:function(e){console.log(e.responseText),r(e.responseText,"error")}})}))},c=function(){let e=$(".post-comment-form");for(let t of e){let e=t.children[1].value;s(e)}},a=function(){let e=$(".delete-comment-button");for(let t of e)i(t)},r=function(e,t){new Noty({theme:"relax",text:e,type:t,layout:"topRight",timeout:1500}).show()};(function(){o(),e(),c(),a()})()}